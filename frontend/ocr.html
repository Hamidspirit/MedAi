<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>OCR Test</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 40px;
			background: #f7f7f7;
		}

		.container {
			max-width: 600px;
			margin: auto;
			background: #fff;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
		}

		h2 {
			text-align: center;
		}

		input[type="file"] {
			margin: 15px 0;
		}

		button {
			background: #4CAF50;
			color: white;
			border: none;
			padding: 10px 18px;
			border-radius: 4px;
			cursor: pointer;
		}

		button:hover {
			background: #45a049;
		}

		#result {
			margin-top: 20px;
			white-space: pre-wrap;
			background: #f0f0f0;
			padding: 12px;
			border-radius: 6px;
			min-height: 100px;
		}
	</style>
</head>

<body>
	<div class="container">
		<h2>OCR File Upload</h2>
		<input type="file" id="fileInput" accept="image/*,.pdf"><br>
		<button onclick="uploadFile()">Send</button>
		<div id="result">Extracted text will appear here...</div>
	</div>

	<script>
		async function uploadFile() {
			const fileInput = document.getElementById('fileInput');
			if (!fileInput.files.length) {
				alert("Please select a file first.");
				return;
			}

			const formData = new FormData();
			formData.append("file", fileInput.files[0]);

			try {
				const response = await fetch("/ocr/upload", {
					method: "POST",
					body: formData
				});

				if (!response.ok) {
					throw new Error("Upload failed: " + response.statusText);
				}

				const data = await response.json();
				document.getElementById("result").textContent = data.extracted_text || "No text found.";
			} catch (error) {
				document.getElementById("result").textContent = "Error: " + error.message;
			}
		}
	</script>
</body>

</html>
